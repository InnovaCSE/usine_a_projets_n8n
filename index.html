<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸš€ Prototype Ultime â€“ Usine Ã  IdÃ©es</title>
  <link rel="icon" href="https://twemoji.maxcdn.com/v/latest/svg/1f680.svg" />

  <!-- TailwindCSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Chart.js pour graphe coÃ»ts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 text-gray-800 flex flex-col items-center min-h-screen">

  <!-- Loader -->
  <div id="loader" class="fixed inset-0 flex flex-col items-center justify-center bg-gray-200 z-50">
    <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-orange-500"></div>
    <p class="mt-4 text-lg text-gray-700">PrÃ©paration de ton cockpit crÃ©atifâ€¦</p>
  </div>

  <!-- Header -->
  <header class="w-full text-center py-6 bg-white shadow-md">
    <h1 class="text-2xl font-bold text-orange-600">ğŸš€ Prototype Ultime â€“ Usine Ã  IdÃ©es</h1>
    <p class="text-gray-600">âœ¨ Ton cockpit crÃ©atif tout-en-un</p>
  </header>

  <!-- Statut -->
  <section id="statusBar" class="w-full max-w-3xl mx-auto mt-4 p-3 rounded-lg shadow text-center flex items-center justify-between bg-green-100 border border-green-300">
    <span id="statusText" class="font-semibold text-green-700">âœ… Workflow actif</span>
    <div class="space-x-2">
      <button id="relancerBtn" class="px-3 py-1 bg-orange-500 text-white rounded-lg shadow">ğŸ”„ Relancer</button>
      <button id="resetBtn" class="px-3 py-1 bg-gray-400 text-white rounded-lg shadow">ğŸ”„0 Reset compteur</button>
      <button id="soundToggle" class="px-3 py-1 bg-blue-500 text-white rounded-lg shadow">ğŸ”Š</button>
    </div>
  </section>

  <!-- Formulaire -->
  <section class="w-full max-w-3xl mx-auto mt-6 bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-xl font-semibold text-gray-700 mb-4">Lance ton brainstorming</h2>
    <form id="ideaForm" class="space-y-4">
      <input id="themeInput" type="text" placeholder="Entre ton thÃ¨meâ€¦" class="w-full p-3 border rounded-lg" required />
      <select id="nbIdeas" class="w-full p-3 border rounded-lg">
        <option value="5">5 idÃ©es</option>
        <option value="10">10 idÃ©es</option>
        <option value="20">20 idÃ©es</option>
      </select>
      <button type="submit" class="w-full py-3 bg-orange-600 text-white rounded-lg shadow hover:bg-orange-700">ğŸš€ GÃ©nÃ©rer</button>
    </form>
  </section>

  <!-- RÃ©sultats -->
  <section id="results" class="w-full max-w-3xl mx-auto mt-6 bg-white p-6 rounded-lg shadow-md hidden">
    <h2 class="text-xl font-semibold text-gray-700 mb-4">ğŸ’¡ RÃ©sultats</h2>
    <div id="ideasList" class="space-y-4"></div>
    <button id="exportPDF" class="mt-6 w-full py-3 bg-green-600 text-white rounded-lg shadow hover:bg-green-700">ğŸ“„ Exporter en PDF</button>
  </section>

  <!-- Graphique coÃ»ts -->
  <section class="w-full max-w-3xl mx-auto mt-6 bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-xl font-semibold text-gray-700 mb-4">ğŸ“Š Suivi des coÃ»ts (â‚¬)</h2>
    <canvas id="costChart" height="100"></canvas>
  </section>

  <!-- Notification -->
  <div id="notification" class="fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow hidden"></div>

  <!-- Script -->
  <script>
    // Loader
    window.addEventListener("load", () => {
      setTimeout(() => {
        document.getElementById("loader").style.display = "none";
      }, 1500);
    });

    // Variables
    let runCount = 0;
    let soundEnabled = true;
    const notification = document.getElementById("notification");
    const statusText = document.getElementById("statusText");
    const costChartCtx = document.getElementById("costChart").getContext("2d");

    // Graph init
    const costChart = new Chart(costChartCtx, {
      type: "line",
      data: {
        labels: [],
        datasets: [{
          label: "CoÃ»t par run (â‚¬)",
          data: [],
          borderColor: "orange",
          backgroundColor: "rgba(255,165,0,0.2)"
        }]
      }
    });

    // Notification
    function showNotification(message, color = "green") {
      notification.textContent = message;
      notification.className = `fixed bottom-4 right-4 px-4 py-2 rounded-lg shadow bg-${color}-600 text-white`;
      notification.style.display = "block";
      setTimeout(() => { notification.style.display = "none"; }, 2000);
    }

    // Sound
    document.getElementById("soundToggle").addEventListener("click", () => {
      soundEnabled = !soundEnabled;
      document.getElementById("soundToggle").textContent = soundEnabled ? "ğŸ”Š" : "ğŸ”‡";
    });

    function playSound() {
      if (soundEnabled) {
        const audio = new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg");
        audio.play();
      }
    }

    // Form submit
    document.getElementById("ideaForm").addEventListener("submit", (e) => {
      e.preventDefault();
      runCount++;
      statusText.textContent = `ğŸš€ GÃ©nÃ©ration en cours (Run #${runCount})â€¦`;
      document.getElementById("results").classList.remove("hidden");

      // Fake results for demo
      const theme = document.getElementById("themeInput").value;
      const ideasList = document.getElementById("ideasList");
      ideasList.innerHTML += `<div class="p-3 border rounded-lg"><strong>IdÃ©e ${runCount} :</strong> ${theme} - Prototype gÃ©nÃ©rÃ©</div>`;

      // Update chart
      costChart.data.labels.push("Run " + runCount);
      const randomCost = (Math.random() * 2).toFixed(2);
      costChart.data.datasets[0].data.push(randomCost);
      costChart.update();

      // Status
      statusText.textContent = `ğŸ“‚ RÃ©sultats disponibles (Runs effectuÃ©s: ${runCount})`;
      playSound();
    });

    // Relancer
    document.getElementById("relancerBtn").addEventListener("click", () => {
      document.getElementById("ideaForm").dispatchEvent(new Event("submit"));
    });

    // Reset
    document.getElementById("resetBtn").addEventListener("click", () => {
      runCount = 0;
      statusText.textContent = "âœ… Workflow actif";
      showNotification("âœ… Compteur remis Ã  zÃ©ro");
    });
  </script>
</body>
</html>
